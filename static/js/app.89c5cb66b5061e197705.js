webpackJsonp([2,0],{0:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=a(117),o=n(i),r=a(116),s=n(r),u=a(105),d=n(u),l=a(111),c=n(l),f=a(114),p=n(f),v=a(115),h=n(v),m=a(112),g=n(m),b=a(11);o.default.use(s.default),o.default.use(d.default);var w=new s.default;w.map({"":{component:p.default},"/time-log/:sheetId":{component:h.default},"/create-time-log":{component:g.default}}),w.start(c.default,"#app"),(0,b.initializeGoogleApi)()},11:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return gapi.auth.authorize({client_id:j,scope:P,immediate:e},p)}function o(e){function t(){r(),e()}var a=gapi.auth.getToken();if(a){var n=a.access_token,i="https://accounts.google.com/o/oauth2/revoke?token="+n;window.jQuery.ajax({type:"GET",url:i,async:!1,contentType:"application/json",dataType:"jsonp",success:t,error:t})}gapi.auth.signOut(),a||setTimeout(t,0)}function r(){E.default.filesLoaded=!1,E.default.files=[],E.default.authenticated=void 0}function s(e){return gapi.client.sheets.spreadsheets.values.get({spreadsheetId:e,range:I}).then(w,y)}function u(e,t,a,n){return gapi.client.sheets.spreadsheets.values.append({spreadsheetId:e,valueInputOption:"USER_ENTERED",range:I,values:[[t,a,n]]}).then(w,y)}function d(e){return gapi.client.sheets.spreadsheets.create((0,T.default)(e)).then(function(t){var a=t.result;return E.default.files.unshift({id:a.spreadsheetId,name:e}),a},y)}function l(){return gapi.auth?void(R||(R=!0,i(!0))):void(window.initializeGoogleApi=l)}function c(e){if(!e)throw new Error("Response is required here");return e.result&&e.result.error?e.result.error.message:"Unknown error :("}function f(e,t){if(D.has(e)){var a=function(){var a=D.get(e);return setTimeout(function(){return t(a)},0),{v:void 0}}();if("object"===("undefined"==typeof a?"undefined":(0,_.default)(a)))return a.v}gapi.client.sheets.spreadsheets.get({spreadsheetId:e,fields:"properties/title"}).then(function(a){var n=b(a,"result.properties.title");D.set(e,n),t(n)})}function p(e){E.default.authenticated=e&&!e.error,E.default.authenticated&&v()}function v(){gapi.client.load("https://sheets.googleapis.com/$discovery/rest?version=v4").then(h),gapi.client.load("drive","v3",m)}function h(){E.default.sheetsAPIReady=!0}function m(){gapi.client.drive.files.list({q:"mimeType='application/vnd.google-apps.spreadsheet' and trashed = false",pageSize:100}).execute(function(e){E.default.filesLoaded=!0,E.default.files=e.files,g(e.files)},y)}function g(e){e.forEach(function(e){D.set(e.id,e.name)})}function b(e,t){if(!e)return e;for(var a=t.split("."),n=0;n<a.length;++n){var i=a[n];if(e=e[i],!e)return e}return e}function w(e){return e}function y(e){return 401===e.status&&window.location.reload(),e}Object.defineProperty(t,"__esModule",{value:!0});var x=a(67),_=n(x),S=a(63),k=n(S);t.signIn=i,t.signOut=o,t.fetchLastRecords=s,t.logTime=u,t.createSpreadsheet=d,t.initializeGoogleApi=l,t.getError=c,t.getSheetTitle=f;var M=a(15),E=n(M),O=a(57),T=n(O),j="616901175953-k3qnrg34f7khs5a688k8l51oqn4f15o1.apps.googleusercontent.com",I="A2:C",P=["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/spreadsheets"],D=new k.default,R=!1},15:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={authenticated:void 0,sheetsAPIReady:!1,filesLoaded:!1,files:[],pageName:""};t.default=a},22:function(e,t){"use strict";function a(e){var t=new Date(e+"Z");return t.toISOString().substr(0,"2016-09-27T02:10:00".length).replace(/T/," ").replace(/-/g,"/")}function n(){return i(new Date)}function i(e){return e.getFullYear()+"-"+o(e.getMonth()+1)+"-"+o(e.getDate())+"T"+o(e.getHours())+":"+o(e.getMinutes())+":"+o(e.getSeconds())}function o(e){return e<10?"0"+e:e}Object.defineProperty(t,"__esModule",{value:!0}),t.convertDateToSheetsDateString=a,t.getNow=n,t.toDateInputStr=i},38:function(e,t){"use strict";function a(e){return e.$route.params.sheetId}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},55:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){e.recordsState="loading";var t=(0,d.default)(e);return(0,c.fetchLastRecords)(t).then(function(t){e.recordsState="loaded";var a=t.result.values||[],n=a.reverse().slice(0,100);e.lastRecords=n;var i=o(n);i?e.start=i:(e.start=(0,l.getNow)(),e.end=(0,l.getNow)())},function(e){console.error("failed to load range",e)})}function o(e){if(0===e.length)return"";var t=e[0];if(t.length<2)return"";var a=t[1];if(!a)return"";var n=new Date(a);return(0,s.default)(n.getDate())?"":(0,l.toDateInputStr)(n)}Object.defineProperty(t,"__esModule",{value:!0});var r=a(64),s=n(r);t.default=i;var u=a(38),d=n(u),l=a(22),c=a(11)},56:function(e,t){"use strict";function a(){return void 0!==i?i:i=n()}function n(){var e=document.createElement("input");e.setAttribute("type","datetime-local");var t="not-a-date";return e.setAttribute("value",t),e.value!==t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=void 0},57:function(e,t){"use strict";function a(e){return{properties:{title:""+e},sheets:n("Time Log")}}function n(e){return{properties:{title:e,gridProperties:{frozenRowCount:1,frozenColumnCount:3}},data:[i()]}}function i(){return{startRow:0,startColumn:0,rowData:{values:[o("Start"),o("End"),o("What?")]}}}function o(e){return{userEnteredValue:{stringValue:e},userEnteredFormat:{horizontalAlignment:"CENTER",textFormat:{bold:!0}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},58:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(15),o=n(i),r=a(11);t.default={ready:function(){$(".button-collapse").sideNav()},data:function(){return o.default},methods:{onSignInClick:function(){(0,r.signIn)()},onSignOutClick:function(){(0,r.signOut)(function(){return window.location.reload()})}},computed:{unknown:function(){return void 0===o.default.authenticated},apiLoaded:function(){return o.default.authenticated&&o.default.sheetsAPIReady},needsAuthentication:function(){return o.default.authenticated===!1}}}},59:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(11);t.default={data:function(){return{name:"",status:"",error:""}},methods:{create:function(){var e=this;this.status="saving",(0,n.createSpreadsheet)(this.name).then(function(t){e.status="";var a=t.spreadsheetId;e.$router.go("/time-log/"+a)},function(t){e.error=(0,n.getError)(t)})}}}},60:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){}return{setDate:e,destroy:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(104),r=n(o),s=a(22),u=a(56),d=n(u);t.default={props:["label","value"],ready:function(){var e=this,t={allowInput:!0,enableTime:!0,time_24hr:!0,enableSeconds:!0,dateFormat:"Y-m-dTH:i:S",utc:!1,onChange:function(){e.changeFromFlatPickr=!0}};this.flatPickr=(0,d.default)()?i():new r.default(this.$els.date,t)},detached:function(){this.flatPickr.destroy()},methods:{setNow:function(){this.value=(0,s.getNow)()}},watch:{value:function(e){this.changeFromFlatPickr?this.changeFromFlatPickr=!1:this.flatPickr.setDate(e)}}}},61:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(15),o=n(i);t.default={data:function(){return o.default},route:{data:function(){o.default.pageName="Select Sheet"}},computed:{empty:function(){return 0===o.default.files.length&&o.default.filesLoaded}}}},62:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(15),o=n(i),r=a(11),s=a(22),u=a(55),d=n(u),l=a(38),c=n(l),f=a(113),p=n(f);t.default={data:function(){return{recordsState:"loading",lastRecords:[],start:"",end:(0,s.getNow)(),what:"",saveState:""}},computed:{editLink:function(){var e=(0,c.default)(this);return"https://docs.google.com/spreadsheets/d/"+e+"/edit"}},components:{DateTime:p.default},route:{data:function(){var e=this;o.default.pageName="Loading data...",(0,d.default)(this).then(function(){var t=(0,c.default)(e);(0,r.getSheetTitle)(t,function(e){o.default.pageName=e})})}},methods:{refreshRecords:function(){(0,d.default)(this)},logIt:function(){var e=this;this.saveState="saving";var t=(0,s.convertDateToSheetsDateString)(this.start),a=(0,s.convertDateToSheetsDateString)(this.end),n=(0,c.default)(this);(0,r.logTime)(n,t,a,this.what).then(function(){e.lastRecords.unshift([t,a,e.what]),e.start=e.end,e.end=(0,s.getNow)(),e.what="",e.saveState="done",e.error=""},function(t){e.saveState="error",e.error=(0,r.getError)(t)})}}}},103:function(e,t){},106:function(e,t){e.exports=' <div> <div class=navbar-fixed> <nav> <div class=nav-wrapper> <a href=# class=brand-logo>{{pageName}}</a> <a href=# data-activates=mobile-demo class=button-collapse><i class=material-icons>menu</i></a> <ul id=nav-mobile class="right hide-on-med-and-down"> <li v-if=authenticated><a href=# @click.prevent=onSignOutClick>Sign out</a></li> <li><a href=https://github.com/anvaka/time>Source code</a></li> </ul> <ul class=side-nav id=mobile-demo> <li v-if=authenticated><a href=# @click.prevent=onSignOutClick>Sign out</a></li> <li><a href=https://github.com/anvaka/time>Source code</a></li> </ul> </div> </nav> </div> <div class=container> <div v-if=unknown> <h3>Checking authentication...<h3> </h3></h3></div> <div v-if=apiLoaded> <router-view class=view keep-alive></router-view> </div> <div v-if=needsAuthentication> <h1>Welcome!</h1> <p> This is a simple interface to Google Sheets, that allows you to log your time. Log it here, and analyze from Google Sheets later </p> <a class="waves-effect waves-light btn" @click=onSignInClick>Sign in to Google Sheets</a> <div> <h4>Demo</h4> <iframe src=https://www.youtube.com/embed/5e8K0LMdTmw frameborder=0 allowfullscreen class=video-demo></iframe> </div> </div> </div> </div> '},107:function(e,t){e.exports=' <div> <h3>Create new time log</h3> <form @submit.prevent=create> <div class=input-field> <label for=name>File name:</label> <input id=name type=text v-model=name autofocus> </div> <input type=submit class="waves-effect waves-light btn col s12" value="Create new file" v-if=\'status === ""\'/> </form> <div v-if=\'status === "saving"\'> <h4>Saving {{name}}...</h4> <div class=progress> <div class=indeterminate></div> </div> </div> <div v-if=error class="card-panel red-text"> <h4>Error...</h4> <pre><code>{{error}}</code></pre> <div> Refresh the page maybe? </div> </div> </div> '},108:function(e,t){e.exports=" <div> <label>{{label}} <a href=# v-clap.prevent=setNow()>set to now</a></label> <input v-el:date type=datetime-local v-model=value data-input> </div> "},109:function(e,t){e.exports=' <div> <div v-if=empty> <h3>No time sheets?</h3> <p>I could not find any time logs in your account. <a v-link="{path: \'/create-time-log\'}">Create new time log</a>. </p> </div> <div v-if="filesLoaded && !empty"> <h4>Your Sheets</h4> <div class=collection> <a class=collection-item v-for="file in files" v-link="{path: \'/time-log/\' + file.id}">{{file.name}}</a> </div> <div class=fixed-action-btn> <a class="btn-floating btn-small red" v-link="{path: \'/create-time-log\'}" title="Create new time log"> <i class="small material-icons">add</i> </a> </div> </div> </div> '},110:function(e,t){e.exports=' <div> <form novalidate @submit.prevent=logIt> <date-time label=Start :value.sync=start></date-time> <date-time label=End :value.sync=end></date-time> <div class=input-field> <label for=what>What?</label> <input id=what type=text v-model=what> </div> <div class=row v-if=\'saveState !== "saving"\'> <input type=submit class="waves-effect waves-light btn col s12" value="Log time"/> </div> </form> <div v-if=\'saveState === "saving"\'> <h4>Saving...</h4> <div class=progress> <div class=indeterminate></div> </div> </div> <div v-if=\'saveState === "error"\' class="card-panel red-text"> <h4>Error...</h4> <pre><code>{{error}}</code></pre> <div> Refresh the page maybe? </div> </div> <div v-if=\'recordsState === "loaded"\'> <table> <thead> <tr> <th data-field=start>Start</th> <th data-field=end>End</th> <th data-field=what> What? <a href=# @click.prevent=refreshRecords class=right title=refresh>&#x21bb;</a> </th> </tr> </thead> <tbody> <tr v-for="record in lastRecords"> <td>{{record[0]}}</td> <td>{{record[1]}}</td> <td>{{record[2]}}</td> </tr> </tbody> </table> <div class=fixed-action-btn style="bottom: 12px; right: 12px"> <a class="btn-floating btn-small red" :href=editLink title="Edit records..." target=_blank> <i class="small material-icons">mode_edit</i> </a> </div> </div> <div v-if=\'recordsState === "loading"\'> <h4>Loading records...</h4> <div class=progress> <div class=indeterminate></div> </div> </div> </div> '},111:function(e,t,a){var n,i,o={};a(103),n=a(58),i=a(106),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;i&&(r.template=i),r.computed||(r.computed={}),Object.keys(o).forEach(function(e){var t=o[e];r.computed[e]=function(){return t}})},112:function(e,t,a){var n,i,o={};n=a(59),i=a(107),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;i&&(r.template=i),r.computed||(r.computed={}),Object.keys(o).forEach(function(e){var t=o[e];r.computed[e]=function(){return t}})},113:function(e,t,a){var n,i,o={};n=a(60),i=a(108),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;i&&(r.template=i),r.computed||(r.computed={}),Object.keys(o).forEach(function(e){var t=o[e];r.computed[e]=function(){return t}})},114:function(e,t,a){var n,i,o={};n=a(61),i=a(109),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;i&&(r.template=i),r.computed||(r.computed={}),Object.keys(o).forEach(function(e){var t=o[e];r.computed[e]=function(){return t}})},115:function(e,t,a){var n,i,o={};n=a(62),i=a(110),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports.default);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;i&&(r.template=i),r.computed||(r.computed={}),Object.keys(o).forEach(function(e){var t=o[e];r.computed[e]=function(){return t}})}});
//# sourceMappingURL=app.89c5cb66b5061e197705.js.map